{"is_source_file": true, "format": "Dart", "description": "This Dart file defines the GameProvider class, which manages game state, user interactions, and integrates with game logic and persistence. It serves as a bridge between game logic and Flutter UI, providing functionalities such as starting new games, making moves, undoing actions, and tracking scores.", "external_files": ["../game/board.dart", "../game/game_logic.dart", "../game/move_result.dart", "../game/tile.dart", "../utils/persistence.dart"], "external_methods": ["GameLogic.newGame", "GameLogic.move", "Persistence.getBestScore", "Persistence.setBestScore"], "published": ["GameProvider"], "classes": [{"name": "GameProvider", "description": "A ChangeNotifier that manages the state of the 2048 game, including the board, score, best score, game status flags, move history, and functions for game actions such as move, undo, and start new game."}], "methods": [{"name": "GameProvider", "description": "Constructor that initializes the game state, optionally with a seed for reproducibility, and loads the persisted best score."}, {"name": "newGame", "description": "Starts a new game, resetting the board, score, flags, and clearing move history. Optionally seeds the random number generator for reproducibility."}, {"name": "undo", "description": "Reverts the last move by restoring the previous game snapshot if available."}, {"name": "moveLeft", "description": "Performs a move to the left using the game logic, updates state accordingly."}, {"name": "moveRight", "description": "Performs a move to the right using the game logic, updates state accordingly."}, {"name": "moveUp", "description": "Performs a move upward using the game logic, updates state accordingly."}, {"name": "moveDown", "description": "Performs a move downward using the game logic, updates state accordingly."}, {"name": "_performMove", "description": "Internal method that applies a move result to the game state, updates score, flags, and the board, and manages undo history."}, {"name": "_applyResultToBoard", "description": "Reconstructs the updated board after a move based on the move result, applying tile moves, merges, and spawns."}], "calls": ["GameLogic.newGame", "GameLogic.move", "Persistence.getBestScore", "Persistence.setBestScore"], "search-terms": ["ChangeNotifier", "2048", "game state management", "move handling", "undo feature", "score tracking", "board update", "persistent best score", "move result processing"], "state": 2, "file_id": 20, "knowledge_revision": 66, "git_revision": "", "revision_history": [{"43": ""}, {"44": ""}, {"62": ""}, {"63": ""}, {"64": ""}, {"66": ""}], "hash": "bbdf97c7035944e3a8f831fc863c3b01", "format-version": 4, "code-base-name": "frontend_flutter", "filename": "frontend_flutter/lib/providers/game_provider.dart"}