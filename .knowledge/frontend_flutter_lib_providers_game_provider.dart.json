{"is_source_file": true, "format": "dart", "description": "This Dart source file defines the 'GameProvider' class which acts as a state management provider for a 2048 game implemented using Flutter. It manages game state, handles moves, undo functionality, persistence of high scores, and interacts with game logic and UI.", "external_files": ["../game/game.dart", "../utils/persistence.dart"], "external_methods": ["GameLogic.newGame", "GameLogic.move", "Persistence.getBestScore", "Persistence.setBestScore"], "published": ["GameProvider"], "classes": [{"name": "GameProvider", "description": "A ChangeNotifier that bridges game logic with Flutter UI, managing game state, move execution, undo, and score persistence."}, {"name": "_GameSnapshot", "description": "A private class used to snapshot game state for undo functionality."}, {"name": "TileRef", "description": "A lightweight class to reference a tile and its position on the board during move updates."}], "methods": [{"name": "GameProvider", "description": "Constructor initializing the game provider with optional seed for deterministic behavior."}, {"name": "resetOutcomeFlags", "description": "Resets transient game outcome flags without altering the board, used to dismiss dialogs."}, {"name": "_loadBestScore", "description": "Asynchronously loads the best score from persistent storage."}, {"name": "newGame", "description": "Starts a new game, resetting the board, score, and history, with optional reseeding of RNG."}, {"name": "undo", "description": "Reverts the last move if available, restoring previous board, score, and flags."}, {"name": "moveLeft", "description": "Performs a left move action."}, {"name": "moveRight", "description": "Performs a right move action."}, {"name": "moveUp", "description": "Performs an upward move action."}, {"name": "moveDown", "description": "Performs a downward move action."}, {"name": "_performMove", "description": "Handles applying move results to the state and notifying listeners."}, {"name": "_applyResultToBoard", "description": "Reconstructs the board based on move result steps, applying moves, merges, and spawns."}], "calls": ["GameLogic.newGame", "GameLogic.move", "Persistence.getBestScore", "Persistence.setBestScore"], "search-terms": ["GameProvider", "moveLeft", "moveRight", "moveUp", "moveDown", "undo", "2048", "flutter", "ChangeNotifier", "game state management"], "state": 2, "file_id": 20, "knowledge_revision": 127, "git_revision": "", "revision_history": [{"43": ""}, {"44": ""}, {"62": ""}, {"63": ""}, {"64": ""}, {"66": ""}, {"104": ""}, {"127": ""}], "hash": "32a4a5c77dfe6cd0d1d4f19176b75d88", "format-version": 4, "code-base-name": "frontend_flutter", "filename": "frontend_flutter/lib/providers/game_provider.dart"}