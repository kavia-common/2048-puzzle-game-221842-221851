{"is_source_file": true, "format": "Dart", "description": "This file contains the core game logic for a 2048 game implementation, including functions for move execution, tile spawning, line compression and merging, and end-state detection. It defines the GameLogic class with static methods and internal helper classes for managing game state transformations.", "external_files": ["board.dart", "move_result.dart", "tile.dart"], "external_methods": ["Board.empty()", "Board.cloneGrid()", "Board.fromGrid()", "Board.getAt()", "Board.removeAt()", "Board.withTileMoved()", "Board.replaceTwoWithMerged()", "Board.spawnAt()", "Board.containsValue()", "Board.hasAnyMove()", "Board.emptyCells()"], "published": ["MoveDirection", "GameLogic"], "classes": [{"name": "GameLogic", "description": "Provides static methods for managing the core mechanics of the 2048 game such as making moves, spawning tiles, and detecting game state conditions."}, {"name": "_LineMergeResult", "description": "Holds the result of compressing and merging a line, including the output tiles and score gained."}, {"name": "_TileWithMergeMeta", "description": "Represents either an empty position, a single tile, or a merged tile pair during line compression/merging."}, {"name": "_ApplyLineResult", "description": "Contains the outcome of applying line merge results to a row or column, including the updated board state and whether any change occurred."}], "methods": [{"name": "newGame", "description": "Creates a new game board with two initial tiles spawned."}, {"name": "move", "description": "Performs a move in the specified direction, returning the result including moved/merged tiles, spawned tiles, score gained, and game state flags."}, {"name": "_diffGetNewTile", "description": "Detects the newly spawned tile by comparing pre- and post-move board states."}, {"name": "_compressAndMergeLine", "description": "Compresses a line toward one end, merging identical tiles once, and returning the merged line with accumulated score."}, {"name": "_applyLineResultRow", "description": "Applies the merged line result to a specific row of the board, updating tile positions and generating move and merge steps."}, {"name": "_applyLineResultCol", "description": "Applies the merged line result to a specific column of the board."}, {"name": "_spawnRandom", "description": "Spawns a new tile (2 or 4) at a random empty cell."}], "calls": ["Board.empty()", "Board.cloneGrid()", "Board.fromGrid()", "Board.getAt()", "Board.removeAt()", "Board.withTileMoved()", "Board.replaceTwoWithMerged()", "Board.spawnAt()", "Board.containsValue()", "Board.hasAnyMove()", "Board.emptyCells()"], "search-terms": ["2048 game logic", "move handling", "tile merge", "game state detection", "board manipulation", "tile spawning", "line compression"], "state": 2, "file_id": 24, "knowledge_revision": 131, "git_revision": "", "revision_history": [{"52": ""}, {"54": ""}, {"126": ""}, {"131": ""}], "hash": "de6acfa7f411b6e167607036bd73f552", "format-version": 4, "code-base-name": "frontend_flutter", "filename": "frontend_flutter/lib/game/game_logic.dart"}