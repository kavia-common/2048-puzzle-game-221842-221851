{"is_source_file": true, "format": "Dart", "description": "This file defines a SoundHapticsService class that manages audio feedback and haptic responses for a Flutter-based 2048 puzzle game. It handles playing various sound effects and triggering haptic feedback based on game events, with platform-specific considerations and fallback mechanisms.", "external_files": ["dart:io", "package:flutter/foundation.dart", "package:flutter/services.dart", "package:audioplayers/audioplayers.dart"], "external_methods": ["Platform", "kIsWeb", "HapticFeedback.selectionClick", "HapticFeedback.mediumImpact", "HapticFeedback.heavyImpact"], "published": ["SoundHapticsService"], "classes": [{"name": "SoundHapticsService", "description": "A service class providing audio and haptic feedback functionalities tailored for different platforms and game events."}], "methods": [{"name": "SoundHapticsService._", "description": "Private constructor initializing the service with an enabled flag."}, {"name": "SoundHapticsService.factory", "description": "Factory constructor to create an instance with optional enabled flag and initialize it."}, {"name": "setEnabled", "description": "Enables or disables both audio and haptic feedback."}, {"name": "enabled", "description": "Getter for the enabled state."}, {"name": "_canHaptic", "description": "Checks if the platform supports haptic feedback (not on web)."}, {"name": "_play", "description": "Plays a specified audio asset with given volume if enabled and assets are ready."}, {"name": "_hapticLight", "description": "Triggers light (selection click) haptic feedback if supported."}, {"name": "_hapticMedium", "description": "Triggers medium impact haptic feedback."}, {"name": "_hapticHeavy", "description": "Triggers heavy impact haptic feedback."}, {"name": "_hapticSuccess", "description": "Triggers a success haptic feedback (approximated)."}, {"name": "_hapticError", "description": "Triggers an error haptic feedback (approximated with multiple clicks)."}, {"name": "onMoveValid", "description": "Called after a valid move; plays sound and triggers haptic."}, {"name": "onInvalidMove", "description": "Called when a move results in no state change; plays sound and triggers haptic."}, {"name": "onMerge", "description": "Called when tiles merge; plays merge sound and medium haptic."}, {"name": "onSpawn", "description": "Called when a new tile spawns; plays spawn sound and light haptic."}, {"name": "onUndo", "description": "Called when undo is pressed; plays undo sound and light haptic."}, {"name": "onRestart", "description": "Called when restart is confirmed; plays restart sound and heavy haptic."}, {"name": "onWin", "description": "Called when the player wins; plays win sound and success haptic."}, {"name": "onLose", "description": "Called when no moves remain; plays lose sound and error haptic."}], "calls": ["AudioPlayer.setSource", "AudioPlayer.setVolume", "AudioPlayer.resume", "HapticFeedback.selectionClick", "HapticFeedback.mediumImpact", "HapticFeedback.heavyImpact"], "search-terms": ["SoundHapticsService", "audio feedback", "haptics", "assets/sfx", "game sound effects", "platform support", "flutter/haptic feedback"], "state": 2, "file_id": 37, "knowledge_revision": 136, "git_revision": "", "hash": "66f88c5a100ef7b6526944b3aad2aef3", "format-version": 4, "code-base-name": "frontend_flutter", "filename": "frontend_flutter/lib/utils/sound_haptics.dart", "revision_history": [{"136": ""}]}